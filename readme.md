## 1 赛题要求
根据个人喜好进行推荐，目前，Elo是巴西最大的支付品牌之一，与商家建立了合作伙伴关系，以便为持卡人提供促销或折扣。但这些促销活动是否适用于消费者或商家？客户是否喜欢他们的体验？商家看到重复业务吗？个性化是关键。
Elo建立了机器学习模型，以了解客户生命周期中最重要的方面和偏好，从食品到购物。但到目前为止，它们都没有专门针对个人或个人资料量身定制，这是我们要做的地方。
https://www.kaggle.com/c/elo-merchant-category-recommendation

## 2 赛题解释
ELO根据自己的方案制定了一套用户评级系统，针对不同用户的不同评级进行推荐，我们要预测该用户的忠诚度评分，用来表示在该用户是否值得推荐（对推荐的商品是否满意）
## 3 数据内容
用户消费记录（包含消费商家、消费金额、消费地点、消费日期、交易类别）
商家信息（包含商户类别、商户收入、商户交易数、商户所在地、商户过去3、6、12个月的营业状况）
## 4 特征工程
* 基础时间特征
* 年、月、天、周、周末
* 激活日期距今时间差
* 最近一次购物的相对时间
* 两次消费时间差
* 一阶聚合特征
* Groupby用户id
* 城市数、商店类型、购买金额
* Nunique/sum/mean/std/median/quantile/max/min
* 二阶聚合特征
* Groupby 用户id、【类别、周末、商家类别】
* Nunique/sum/mean/std/median/quantile
* 区分au=1与au=0的特征
* 基于天的特征
* 前后两次购物是否重复光顾某家店
* 两次购物时间差
* 连续四次购物类别统计（第一天/第二天购物是否有交集）
* 节假日特征
* 购买日期距黑色星期五、父亲节等节日的天数
## 5 建模方法
1. Lgb训练，两个不同特征训练出来的版本加权融合，得到答案0
2. Target包含极端值-33，训练无-33的数据，得到答案1
3. 将-33设为1，其他target设为0，转化为二分类问题，训练得到-33概率
4. 按概率排序，取答案1中概率最大的25000个数据替换为答案0
5. 对回归target小于阈值，且概率模型大于阈值的值，直接-10，使其更接近于-33
